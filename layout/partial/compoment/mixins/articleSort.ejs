<% let year %>

<% page.posts.data.forEach(post => { %>

    <!-- 获取文章的年份，然后判断当前文章的年份是否与上一篇文章的年份相同，如果不同则输出一个年份标题 -->
    <% if(year !== moment(post.date).year()){ 
        year = moment(post.date).year() %>
        <div class="article-sort-item year"><%= year %></div>
    <% } %>

    <div class="article-sort-item">

        <!-- 输出文章的封面 -->
        <a class="article-sort-item-img" href="<%= url_for(post.path) %>" title="<%= post.title %>">
            <img src="<%= post.cover %>"
                alt="<%= post.title %>">
        </a>

        <div class="article-sort-item-info">
            <!-- 输出文章的标题 -->
            <a class="article-sort-item-title" href="<%= url_for(post.path) %>" title="<%= post.title %>"
                onclick="window.event.cancelBubble=true;">
                <%= post.title %>
            </a>

            <!-- 输出文章的标签 -->
            <div class="article-sort-item-tags">
                <% post.tags.data.forEach(tags => { %>
                    <a class="article-meta__tags" href="<%= url_for(tags.path) %>" onclick="window.event.cancelBubble=true;">
                        <span class="tags-punctuation">#</span>
                        <%= tags.name %>
                    </a>
                <% }) %>
            </div>

        </div>

    </div>

<% }); %>